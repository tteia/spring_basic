<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“ íšŒì› ê°€ì…</title>
</head>
<body>
<div>
    <form id="postForm">
        <label for="name">ì´ë¦„ : </label>
        <input
                type="text"
                id="name"
                name="name"
                placeholder="ì´ë¦„ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."
        />
        <br/>
        <br/>
        <label for="email">ì´ë©”ì¼ : </label>
        <input
                type="email"
                id="email"
                name="email"
                placeholder="ì´ë©”ì¼ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."
        />
        <br/>
        <br/>
        <label for="password">ë¹„ë°€ë²ˆí˜¸ : </label>
        <input
                type="password"
                id="password"
                name="password"
                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”."
        />
        <br/>
        <br/>
        <div class="form-group">
            <label for="image"><br />í”„ë¡œí•„ ì‚¬ì§„ ì—…ë¡œë“œ <br /></label>
            <input
                    class="form-control"
                    type="file"
                    id="image"
                    name="image"
                    accept="image/*"
                    multiple
            />
        </div>
        <input type="submit" value="ì œì¶œ">
    </form>
</div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    document
      .getElementById("postForm")
      .addEventListener("submit", async function (event) {
        event.preventDefault();
        // input ì—ì„œ id ê°’ì´ ìˆì–´ì•¼ ì„ ì–¸í•´ì„œ í• ë‹¹ ë¨.
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        const hello = {name: name, email: email, password: password};
        const helloJson = JSON.stringify(hello);

        const inputImage = document.getElementById("image");
        const images = inputImage.files; // image ë¥¼ multi ë¡œ ì„¤ì •í–ˆìœ¼ë‹ˆê¹Œ s ë¶™ì—¬ì„œ ëª¨ë‘ ìˆ˜ì •.

        const formData = new FormData();
<!--        formData.append("hello", helloJson);-->
<!--        // blob í•¨ìˆ˜ëŠ” ë°ì´í„°í˜•ì„ ì§€ì •/ë³€í™˜í•  ë•Œ ì‚¬ìš©.-->
        formData.append("hello", new Blob([helloJson], {type: "application/json"}));
        // ì—¬ëŸ¬ ê°œë‹ˆê¹Œ forë¬¸ ëŒë ¤ì£¼ê¸°.
        for(let i = 0; i < images.length; i++){
            formData.append("images", images[i]);
        }
        <!--formData.append("image", image);   -->
        try {
          const response = await axios.post("http://localhost:8080/hello/axios-json-multi-file-view", formData, {headers : {'Content-Type' : 'multipart/form-data'}});
          console.log(response.data);
        } catch (e) {
          console.log(e);
        }
      });
</script>
</body>
</html>
